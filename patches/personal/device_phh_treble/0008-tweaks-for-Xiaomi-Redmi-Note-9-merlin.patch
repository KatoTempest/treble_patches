From 2e58f863948f2dbff67d7d24641289605337dec6 Mon Sep 17 00:00:00 2001
From: Victor Bo <bvoid@yandex.ru>
Date: Sat, 17 Oct 2020 06:58:04 -0400
Subject: [PATCH 08/16] tweaks for Xiaomi Redmi Note 9 'merlin'

  audiojack, brightness, fp touches
  (thanks Akitake for reports)
---
 rw-system.sh | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

diff --git a/rw-system.sh b/rw-system.sh
index b250427..8f319f0 100644
--- a/rw-system.sh
+++ b/rw-system.sh
@@ -101,7 +101,7 @@ changeKeylayout() {
         -e xiaomi/nitrogen -e xiaomi/sakura -e xiaomi/andromeda \
         -e xiaomi/whyred -e xiaomi/tulip -e xiaomi/onc \
         -e redmi/curtana -e redmi/picasso -e Redmi/lancelot \
-        -e Redmi/galahad; then
+        -e Redmi/galahad -e Redmi/merlin; then
         if [ ! -f /mnt/phh/keylayout/uinput-goodix.kl ]; then
           cp /system/phh/empty /mnt/phh/keylayout/uinput-goodix.kl
           chmod 0644 /mnt/phh/keylayout/uinput-goodix.kl
@@ -313,10 +313,15 @@ if getprop ro.vendor.build.fingerprint | grep -q -i \
     -e xiaomi/nitrogen -e xiaomi/whyred -e xiaomi/platina \
     -e xiaomi/ysl -e nubia/nx60 -e nubia/nx61 -e xiaomi/tulip -e Redmi/begonia\
     -e xiaomi/lavender -e xiaomi/olive -e xiaomi/olivelite -e xiaomi/pine \
-    -e Redmi/lancelot -e Redmi/galahad; then
+    -e Redmi/lancelot -e Redmi/galahad -e Redmi/merlin; then
     setprop persist.sys.qcom-brightness "$(cat /sys/class/leds/lcd-backlight/max_brightness)"
 fi
 
+#Xiaomi Redmi Note 9
+if getprop ro.vendor.build.fingerprint |grep -qi -e Redmi/merlin; then
+    setprop persist.sys.overlay.devinputjack true
+fi
+
 #Realme 6
 if getprop ro.vendor.product.device |grep -iq -e RMX2001;then
     setprop persist.sys.phh.fingerprint.nocleanup true
-- 
2.17.1

