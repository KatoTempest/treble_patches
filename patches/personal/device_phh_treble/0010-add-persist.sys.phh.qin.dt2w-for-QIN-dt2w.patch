From 87fe9fb5136ecf239d308492b16434d7c47ce385 Mon Sep 17 00:00:00 2001
From: Victor Bo <bvoid@yandex.ru>
Date: Tue, 6 Oct 2020 14:26:50 -0400
Subject: [PATCH 10/24] add persist.sys.phh.qin.dt2w for QIN dt2w

---
 phh-prop-handler.sh | 9 +++++++++
 vndk.rc             | 3 +++
 2 files changed, 12 insertions(+)

diff --git a/phh-prop-handler.sh b/phh-prop-handler.sh
index 42b40c9..952618e 100644
--- a/phh-prop-handler.sh
+++ b/phh-prop-handler.sh
@@ -160,3 +160,12 @@ if [ "$1" == "persist.sys.phh.backlight.scale" ];then
     fi
     exit
 fi
+
+if [ "$1" == "persist.sys.phh.qin.dt2w" ];then
+    if [[ "$prop_value" != "0" && "$prop_value" != "1" ]]; then
+        exit 1
+    fi
+
+    echo "$prop_value" > /sys/devices/platform/soc/soc:ap-apb/70800000.i2c/i2c-3/3-0038/fts_gesture_mode
+    exit
+fi
diff --git a/vndk.rc b/vndk.rc
index 4adfe9e..4066e14 100644
--- a/vndk.rc
+++ b/vndk.rc
@@ -50,6 +50,9 @@ on property:persist.sys.phh.backlight.scale=*
 on property:ro.sf.lcd_density=*
     restart surfaceflinger
 
+on property:persist.sys.phh.qin.dt2w=*
+    exec u:r:phhsu_daemon:s0 root -- /system/bin/phh-prop-handler.sh "persist.sys.phh.qin.dt2w"
+
 on property:persist.sys.phh.disable_a2dp_offload=0
     setprop persist.sys.phh.disable_a2dp_offload false
 
-- 
2.17.1

