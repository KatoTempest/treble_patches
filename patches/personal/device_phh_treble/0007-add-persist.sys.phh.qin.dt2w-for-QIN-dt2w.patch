From dedcb6711bd2a5a532fad4571cace73a4d4f7a5c Mon Sep 17 00:00:00 2001
From: Victor Bo <bvoid@yandex.ru>
Date: Tue, 6 Oct 2020 14:26:50 -0400
Subject: [PATCH 7/9] add persist.sys.phh.qin.dt2w for QIN dt2w

---
 phh-prop-handler.sh | 9 +++++++++
 vndk.rc             | 3 +++
 2 files changed, 12 insertions(+)

diff --git a/phh-prop-handler.sh b/phh-prop-handler.sh
index 722b569..d7a755e 100644
--- a/phh-prop-handler.sh
+++ b/phh-prop-handler.sh
@@ -143,3 +143,12 @@ if [ "$1" == "persist.sys.phh.vsmart.dt2w" ];then
     fi
     exit
 fi
+
+if [ "$1" == "persist.sys.phh.qin.dt2w" ];then
+    if [[ "$prop_value" != "0" && "$prop_value" != "1" ]]; then
+        exit 1
+    fi
+
+    echo "$prop_value" > /sys/devices/platform/soc/soc:ap-apb/70800000.i2c/i2c-3/3-0038/fts_gesture_mode
+    exit
+fi
diff --git a/vndk.rc b/vndk.rc
index 334a492..bafd9ae 100644
--- a/vndk.rc
+++ b/vndk.rc
@@ -47,6 +47,9 @@ on property:persist.sys.phh.vsmart.dt2w=*
 on property:ro.sf.lcd_density=*
     restart surfaceflinger
 
+on property:persist.sys.phh.qin.dt2w=*
+    exec u:r:phhsu_daemon:s0 root -- /system/bin/phh-prop-handler.sh "persist.sys.phh.qin.dt2w"
+
 on property:persist.sys.phh.disable_a2dp_offload=0
     setprop persist.sys.phh.disable_a2dp_offload false
 
-- 
2.17.1

