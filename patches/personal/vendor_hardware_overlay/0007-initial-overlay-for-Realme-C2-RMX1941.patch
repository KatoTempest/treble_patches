From 1e236ef25ecebdc20f7bf47c918e8daabe07fed2 Mon Sep 17 00:00:00 2001
From: Victor Bo <bvoid@yandex.ru>
Date: Sat, 16 Jan 2021 12:39:33 -0500
Subject: [PATCH 7/9] initial overlay for Realme C2 (RMX1941)

  -wip-
---
 Realme/C2/Android.mk                |   8 +
 Realme/C2/AndroidManifest.xml       |   9 +
 Realme/C2/res/values/config.xml     | 261 ++++++++++++++++++++++++++++
 Realme/C2/res/xml/power_profile.xml | 127 ++++++++++++++
 overlay.mk                          |   1 +
 5 files changed, 406 insertions(+)
 create mode 100644 Realme/C2/Android.mk
 create mode 100644 Realme/C2/AndroidManifest.xml
 create mode 100644 Realme/C2/res/values/config.xml
 create mode 100644 Realme/C2/res/xml/power_profile.xml

diff --git a/Realme/C2/Android.mk b/Realme/C2/Android.mk
new file mode 100644
index 0000000..6b0c868
--- /dev/null
+++ b/Realme/C2/Android.mk
@@ -0,0 +1,8 @@
+LOCAL_PATH := $(call my-dir)
+include $(CLEAR_VARS)
+LOCAL_MODULE_TAGS := optional
+LOCAL_PACKAGE_NAME := treble-overlay-realme-c2
+LOCAL_MODULE_PATH := $(TARGET_OUT_PRODUCT)/overlay
+LOCAL_IS_RUNTIME_RESOURCE_OVERLAY := true
+LOCAL_PRIVATE_PLATFORM_APIS := true
+include $(BUILD_PACKAGE)
diff --git a/Realme/C2/AndroidManifest.xml b/Realme/C2/AndroidManifest.xml
new file mode 100644
index 0000000..101fe8d
--- /dev/null
+++ b/Realme/C2/AndroidManifest.xml
@@ -0,0 +1,9 @@
+<?xml version="1.0" encoding="utf-8" standalone="no"?>
+<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="me.phh.treble.overlay.realme.c2">
+    <overlay
+	android:isStatic="true"
+	android:priority="172"
+	android:targetPackage="android"
+	android:requiredSystemPropertyName="ro.build.overlay.deviceid"
+	android:requiredSystemPropertyValue="+RMX194*" />
+</manifest>
diff --git a/Realme/C2/res/values/config.xml b/Realme/C2/res/values/config.xml
new file mode 100644
index 0000000..014d986
--- /dev/null
+++ b/Realme/C2/res/values/config.xml
@@ -0,0 +1,261 @@
+<?xml version="1.0" encoding="utf-8"?>
+<resources>
+    <array name="config_autoBrightnessButtonBacklightValues" />
+    <array name="config_autoBrightnessDisplayValuesNits">
+        <item>7.702998</item>
+        <item>32.31226</item>
+        <item>38.786167</item>
+        <item>43.30993</item>
+        <item>46.851162</item>
+        <item>55.90478</item>
+        <item>61.334614</item>
+        <item>68.4388</item>
+        <item>75.59099</item>
+        <item>82.8686</item>
+        <item>91.49397</item>
+        <item>102.49851</item>
+        <item>118.8174</item>
+        <item>144.68486</item>
+        <item>180.69225</item>
+        <item>225.84135</item>
+        <item>292.46844</item>
+        <item>377.05084</item>
+        <item>481.93427</item>
+    </array>
+    <array name="config_autoBrightnessLcdBacklightValues" />
+    <integer-array name="config_autoBrightnessLevels">
+        <item>1</item>
+        <item>2</item>
+        <item>3</item>
+        <item>4</item>
+        <item>8</item>
+        <item>12</item>
+        <item>20</item>
+        <item>33</item>
+        <item>55</item>
+        <item>90</item>
+        <item>148</item>
+        <item>245</item>
+        <item>403</item>
+        <item>665</item>
+        <item>1097</item>
+        <item>1808</item>
+        <item>2981</item>
+        <item>5000</item>
+    </integer-array>
+    <integer-array name="config_screenBrightnessBacklight">
+        <item>1</item>
+        <item>2</item>
+        <item>3</item>
+        <item>4</item>
+        <item>5</item>
+        <item>6</item>
+        <item>7</item>
+        <item>8</item>
+        <item>9</item>
+        <item>10</item>
+        <item>11</item>
+        <item>12</item>
+        <item>13</item>
+        <item>14</item>
+        <item>15</item>
+        <item>16</item>
+        <item>17</item>
+        <item>18</item>
+        <item>19</item>
+        <item>20</item>
+        <item>25</item>
+        <item>30</item>
+        <item>35</item>
+        <item>40</item>
+        <item>45</item>
+        <item>50</item>
+        <item>55</item>
+        <item>60</item>
+        <item>65</item>
+        <item>70</item>
+        <item>75</item>
+        <item>80</item>
+        <item>85</item>
+        <item>90</item>
+        <item>95</item>
+        <item>100</item>
+        <item>105</item>
+        <item>110</item>
+        <item>115</item>
+        <item>120</item>
+        <item>125</item>
+        <item>130</item>
+        <item>135</item>
+        <item>140</item>
+        <item>145</item>
+        <item>150</item>
+        <item>155</item>
+        <item>160</item>
+        <item>165</item>
+        <item>170</item>
+        <item>175</item>
+        <item>180</item>
+        <item>185</item>
+        <item>190</item>
+        <item>195</item>
+        <item>200</item>
+        <item>205</item>
+        <item>210</item>
+        <item>215</item>
+        <item>220</item>
+        <item>225</item>
+        <item>230</item>
+        <item>235</item>
+        <item>240</item>
+        <item>245</item>
+        <item>250</item>
+        <item>255</item>
+    </integer-array>
+    <array name="config_screenBrightnessNits">
+        <item>2.685</item>
+        <item>3.343</item>
+        <item>4.13</item>
+        <item>5.216</item>
+        <item>6.308</item>
+        <item>7.565</item>
+        <item>9.269</item>
+        <item>10.98</item>
+        <item>13.25</item>
+        <item>15.49</item>
+        <item>18.42</item>
+        <item>20.6</item>
+        <item>22.71</item>
+        <item>24.68</item>
+        <item>26.31</item>
+        <item>28.39</item>
+        <item>30.34</item>
+        <item>32.39</item>
+        <item>33.94</item>
+        <item>35.94</item>
+        <item>45.12</item>
+        <item>54</item>
+        <item>62.31</item>
+        <item>70.73</item>
+        <item>78.85</item>
+        <item>86.41</item>
+        <item>93.53</item>
+        <item>102.3</item>
+        <item>109.1</item>
+        <item>118.7</item>
+        <item>126.4</item>
+        <item>136.9</item>
+        <item>147.8</item>
+        <item>158.9</item>
+        <item>168.3</item>
+        <item>177.4</item>
+        <item>186.6</item>
+        <item>195.7</item>
+        <item>204.5</item>
+        <item>214</item>
+        <item>221.8</item>
+        <item>234</item>
+        <item>242.1</item>
+        <item>250.6</item>
+        <item>263.4</item>
+        <item>272.4</item>
+        <item>282.5</item>
+        <item>296.3</item>
+        <item>305.6</item>
+        <item>315.3</item>
+        <item>329.8</item>
+        <item>339.8</item>
+        <item>349.7</item>
+        <item>357.4</item>
+        <item>364.6</item>
+        <item>374.6</item>
+        <item>384.9</item>
+        <item>392.5</item>
+        <item>402.8</item>
+        <item>413.6</item>
+        <item>421.6</item>
+        <item>432.2</item>
+        <item>440.3</item>
+        <item>448.3</item>
+        <item>459.2</item>
+        <item>467.6</item>
+        <item>478.5</item>
+    </array>
+    <array name="config_minimumBrightnessCurveNits">
+        <item>0.0</item>
+        <item>50.0</item>
+        <item>90.0</item>
+    </array>
+    <string-array name="networkAttributes">
+        <item>wifi,1,1,1,-1,true</item>
+        <item>mobile,0,0,0,-1,true</item>
+        <item>mobile_mms,2,0,2,60000,true</item>
+        <item>mobile_supl,3,0,2,60000,true</item>
+        <item>mobile_dun,4,0,2,60000,true</item>
+        <item>mobile_hipri,5,0,3,60000,true</item>
+        <item>mobile_fota,10,0,2,60000,true</item>
+        <item>mobile_ims,11,0,-1,-1,true</item>
+        <item>mobile_cbs,12,0,2,60000,true</item>
+        <item>wifi_p2p,13,1,0,-1,true</item>
+        <item>mobile_ia,14,0,2,-1,true</item>
+        <item>mobile_emergency,15,0,2,-1,true</item>
+        <item>mobile_wap,21,0,3,60000,true</item>
+        <item>mobile_xcap,25,0,3,60000,true</item>
+        <item>mobile_rcs,26,0,3,60000,true</item>
+        <item>mobile_bip,27,0,3,60000,true</item>
+        <item>mobile_vsim,28,0,-1,60000,true</item>
+        <item>mobile_preempt,29,0,9,60000,true</item>
+        <item>bluetooth,7,7,2,-1,true</item>
+    </string-array>
+    <string-array name="config_tether_usb_regexs">
+        <item>rndis\\d</item>
+    </string-array>
+    <string-array name="config_tether_wifi_regexs">
+        <item>ap\\d</item>
+    </string-array>
+    <string-array name="config_tether_bluetooth_regexs">
+        <item>bt-pan</item>
+        <item>bt-dun</item>
+    </string-array>
+
+    <bool name="config_automatic_brightness_available">true</bool>
+    <bool name="config_setColorTransformAccelerated">true</bool>
+    <bool name="config_supportAudioSourceUnprocessed">false</bool>
+    <bool name="config_useDevInputEventForAudioJack">true</bool>
+    <bool name="skip_restoring_network_selection">true</bool>
+    <bool name="config_carrier_volte_available">true</bool>
+    <bool name="config_device_volte_available">true</bool>
+    <bool name="config_device_vt_available">true</bool>
+    <bool name="config_device_wfc_ims_available">true</bool>
+    <bool name="config_hotswapCapable">true</bool>
+    <bool name="config_lidControlsSleep">false</bool>
+    <bool name="config_wifiDisplaySupportsProtectedBuffers">false</bool>
+    <bool name="config_wifi_background_scan_support">true</bool>
+    <bool name="config_wifi_batched_scan_supported">false</bool>
+    <bool name="config_wifi_dual_band_support">true</bool>
+    <bool name="config_dozeAlwaysOnDisplayAvailable">false</bool>
+    <bool name="config_displayBlanksAfterDoze">true</bool>
+    <bool name="config_powerDecoupleAutoSuspendModeFromDisplay">false</bool>
+    <bool name="config_showNavigationBar">true</bool>
+    <bool name="config_suspendWhenScreenOffDueToProximity">true</bool>
+    <fraction name="config_autoBrightnessAdjustmentMaxGamma">300.0%</fraction>
+    <fraction name="config_maximumScreenDimRatio">29.999996%</fraction>
+    <integer name="config_autoBrightnessBrighteningLightDebounce">2000</integer>
+    <integer name="config_autoBrightnessDarkeningLightDebounce">3000</integer>
+    <integer name="config_screenBrightnessDark">2</integer>
+    <integer name="config_screenBrightnessDim">2</integer>
+    <integer name="config_screenBrightnessDoze">2</integer>
+    <integer name="config_screenBrightnessSettingDefault">102</integer>
+    <integer name="config_screenBrightnessSettingMaximum">255</integer>
+    <integer name="config_screenBrightnessSettingMinimum">1</integer>
+    <integer name="config_shutdownBatteryTemperature">600</integer>
+
+    <dimen name="status_bar_height_portrait">52px</dimen>
+    <dimen name="navigation_bar_width">44.0dip</dimen>
+    <dimen name="notification_header_padding_bottom">16.0dip</dimen>
+    <dimen name="notification_header_padding_top">21.0dip</dimen>
+    <dimen name="quick_qs_offset_height">48.0dip</dimen>
+    <dimen name="rounded_corner_radius">45.0dip</dimen>
+    <dimen name="rounded_corner_radius_bottom">45.0dip</dimen>
+    <dimen name="rounded_corner_radius_top">45.0dip</dimen>
+</resources>
diff --git a/Realme/C2/res/xml/power_profile.xml b/Realme/C2/res/xml/power_profile.xml
new file mode 100644
index 0000000..e40dc97
--- /dev/null
+++ b/Realme/C2/res/xml/power_profile.xml
@@ -0,0 +1,127 @@
+<?xml version="1.0" encoding="utf-8"?>
+<device name="Android">
+    <item name="none">0</item>
+    <item name="screen.on">45</item>
+    <item name="screen.full">278</item>
+    <item name="bluetooth.active">31</item>
+    <item name="bluetooth.on">1.2</item>
+    <item name="wifi.on">1.5</item>
+    <item name="wifi.active">153</item>
+    <item name="wifi.scan">40</item>
+    <item name="audio">12</item>
+    <item name="video">49</item>
+    <item name="camera.flashlight">160</item>
+    <item name="camera.avg">517</item>
+    <item name="gps.on">30</item>
+    <item name="radio.active">123</item>
+    <item name="radio.scanning">10</item>
+    <array name="radio.on">
+        <value>2</value>
+        <value>1</value>
+    </array>
+    <array name="cpu.clusters.cores">
+        <value>4</value>
+        <value>4</value>
+    </array>
+    <array name="cpu.core_speeds.cluster0">
+        <value>2001000</value>
+        <value>1961000</value>
+        <value>1927000</value>
+        <value>1897000</value>
+        <value>1868000</value>
+        <value>1838000</value>
+        <value>1809000</value>
+        <value>1779000</value>
+        <value>1750000</value>
+        <value>1617000</value>
+        <value>1484000</value>
+        <value>1351000</value>
+        <value>1218000</value>
+        <value>1085000</value>
+        <value>979000</value>
+        <value>900000</value>
+    </array>
+    <array name="cpu.core_speeds.cluster1">
+        <value>1500000</value>
+        <value>1429000</value>
+        <value>1367000</value>
+        <value>1314000</value>
+        <value>1261000</value>
+        <value>1208000</value>
+        <value>1155000</value>
+        <value>1102000</value>
+        <value>1050000</value>
+        <value>948000</value>
+        <value>846000</value>
+        <value>745000</value>
+        <value>643000</value>
+        <value>542000</value>
+        <value>501000</value>
+        <value>400000</value>
+    </array>
+    <item name="cpu.active">8</item>
+    <array name="cpu.core_power.cluster0">
+        <value>228</value>
+        <value>191</value>
+        <value>176</value>
+        <value>162</value>
+        <value>150</value>
+        <value>141</value>
+        <value>132</value>
+        <value>127</value>
+        <value>116</value>
+        <value>106</value>
+        <value>96</value>
+        <value>87</value>
+        <value>78</value>
+        <value>69</value>
+        <value>62</value>
+        <value>55</value>
+    </array>
+    <array name="cpu.core_power.cluster1">
+        <value>95</value>
+        <value>89</value>
+        <value>82</value>
+        <value>78</value>
+        <value>72</value>
+        <value>69</value>
+        <value>65</value>
+        <value>63</value>
+        <value>59</value>
+        <value>56</value>
+        <value>51</value>
+        <value>47</value>
+        <value>45</value>
+        <value>41</value>
+        <value>39</value>
+        <value>34</value>
+    </array>
+    <item name="cpu.idle">6</item>
+    <array name="memory.bandwidths">
+        <value>22.7</value>
+    </array>
+    <item name="battery.capacity">4000</item>
+    <item name="wifi.controller.idle">7.5</item>
+    <item name="wifi.controller.rx">107.9</item>
+    <item name="wifi.controller.tx">212.4</item>
+    <array name="wifi.controller.tx_levels" />
+    <item name="wifi.controller.voltage">3.3</item>
+    <array name="wifi.batchedscan">
+        <value>.0002</value>
+        <value>.002</value>
+        <value>.02</value>
+        <value>.2</value>
+        <value>2</value>
+    </array>
+    <item name="modem.controller.sleep">1</item>
+    <item name="modem.controller.idle">2</item>
+    <item name="modem.controller.rx">83</item>
+    <array name="modem.controller.tx">
+        <value>109</value>
+        <value>111</value>
+        <value>118</value>
+        <value>141</value>
+        <value>199</value>
+    </array>
+    <item name="modem.controller.voltage">800</item>
+</device>
\ No newline at end of file
diff --git a/overlay.mk b/overlay.mk
index 448cfdc..5721dcc 100644
--- a/overlay.mk
+++ b/overlay.mk
@@ -82,6 +82,7 @@ PRODUCT_PACKAGES += \
 	treble-overlay-razer-cheryl \
 	treble-overlay-realme-6 \
 	treble-overlay-realme-6i \
+	treble-overlay-realme-c2 \
 	treble-overlay-realme-c3 \
 	treble-overlay-realme-narzo10a \
 	treble-overlay-realme-x2pro \
-- 
2.17.1

