From 039c75492dd05bf4ccd88d81ad0d6ac12cfff17e Mon Sep 17 00:00:00 2001
From: Victor Bo <bvoid@yandex.ru>
Date: Sun, 13 Dec 2020 05:05:13 -0500
Subject: [PATCH 08/10] add umidigi a3s overlay

  from
  https://github.com/phhusson/vendor_hardware_overlay/commit/420d53633adb6b34916e9c1ebd67600454422217
---
 Umidigi/A3S/Android.mk                |   8 ++
 Umidigi/A3S/AndroidManifest.xml       |  10 ++
 Umidigi/A3S/res/values/arrays.xml     |  42 +++++++
 Umidigi/A3S/res/values/bools.xml      |  18 +++
 Umidigi/A3S/res/xml/power_profile.xml | 165 ++++++++++++++++++++++++++
 overlay.mk                            |   1 +
 6 files changed, 244 insertions(+)
 create mode 100644 Umidigi/A3S/Android.mk
 create mode 100644 Umidigi/A3S/AndroidManifest.xml
 create mode 100644 Umidigi/A3S/res/values/arrays.xml
 create mode 100644 Umidigi/A3S/res/values/bools.xml
 create mode 100644 Umidigi/A3S/res/xml/power_profile.xml

diff --git a/Umidigi/A3S/Android.mk b/Umidigi/A3S/Android.mk
new file mode 100644
index 0000000..798aabf
--- /dev/null
+++ b/Umidigi/A3S/Android.mk
@@ -0,0 +1,8 @@
+LOCAL_PATH := $(call my-dir)
+include $(CLEAR_VARS)
+LOCAL_MODULE_TAGS := optional
+LOCAL_PACKAGE_NAME := treble-overlay-umidigi-A3S
+LOCAL_MODULE_PATH := $(TARGET_OUT_PRODUCT)/overlay
+LOCAL_IS_RUNTIME_RESOURCE_OVERLAY := true
+LOCAL_PRIVATE_PLATFORM_APIS := true
+include $(BUILD_PACKAGE)
diff --git a/Umidigi/A3S/AndroidManifest.xml b/Umidigi/A3S/AndroidManifest.xml
new file mode 100644
index 0000000..b53f097
--- /dev/null
+++ b/Umidigi/A3S/AndroidManifest.xml
@@ -0,0 +1,10 @@
+<manifest xmlns:android="http://schemas.android.com/apk/res/android"
+        package="me.phh.treble.overlay.umidigi.A3S"
+        android:versionCode="1"
+        android:versionName="1.0">
+        <overlay android:targetPackage="android"
+                 android:requiredSystemPropertyName="ro.vendor.build.fingerprint"
+                 android:requiredSystemPropertyValue="+UMIDIGI/A3S/A3S*"
+                 android:priority="172"
+                 android:isStatic="true" />
+</manifest>
diff --git a/Umidigi/A3S/res/values/arrays.xml b/Umidigi/A3S/res/values/arrays.xml
new file mode 100644
index 0000000..bd20b8f
--- /dev/null
+++ b/Umidigi/A3S/res/values/arrays.xml
@@ -0,0 +1,42 @@
+<?xml version="1.0" encoding="utf-8"?>
+<resources>
+    <integer-array name="config_autoBrightnessLcdBacklightValues">
+        <item>8</item>
+        <item>64</item>
+        <item>98</item>
+        <item>104</item>
+        <item>110</item>
+        <item>116</item>
+        <item>122</item>
+        <item>128</item>
+        <item>134</item>
+        <item>182</item>
+        <item>255</item>
+        <item>255</item>
+        <item>255</item>
+        <item>255</item>
+        <item>255</item>
+        <item>255</item>
+        <item>255</item>
+        <item>255</item>
+    </integer-array>
+    <integer-array name="config_autoBrightnessLevels">
+        <item>128</item>
+        <item>256</item>
+        <item>384</item>
+        <item>512</item>
+        <item>640</item>
+        <item>768</item>
+        <item>896</item>
+        <item>1024</item>
+        <item>2048</item>
+        <item>4096</item>
+        <item>6144</item>
+        <item>8192</item>
+        <item>10240</item>
+        <item>12288</item>
+        <item>14336</item>
+        <item>16384</item>
+        <item>18432</item>
+    </integer-array>
+</resources>
diff --git a/Umidigi/A3S/res/values/bools.xml b/Umidigi/A3S/res/values/bools.xml
new file mode 100644
index 0000000..2cca4a7
--- /dev/null
+++ b/Umidigi/A3S/res/values/bools.xml
@@ -0,0 +1,18 @@
+<?xml version="1.0" encoding="utf-8"?>
+<resources>
+    <bool name="config_device_wfc_ims_available">false</bool>
+    <bool name="config_dynamic_bind_ims">true</bool>
+    <bool name="config_hotswapCapable">true</bool>
+    <bool name="config_setColorTransformAccelerated">true</bool>
+    <bool name="config_showNavigationBar">true</bool>
+    <bool name="config_switch_phone_on_voice_reg_state_change">false</bool>
+    <bool name="config_useDevInputEventForAudioJack">true</bool>
+    <bool name="config_wifi_background_scan_support">true</bool>
+    <bool name="config_wifi_connected_mac_randomization_supported">true</bool>
+    <bool name="config_wifi_fast_bss_transition_enabled">true</bool>
+    <bool name="config_wifi_p2p_mac_randomization_supported">true</bool>
+    <bool name="skip_restoring_network_selection">true</bool>
+    <bool name="config_automatic_brightness_available">true</bool>
+    <bool name="config_suspendWhenScreenOffDueToProximity">true</bool>
+    <bool name="config_wifi_dual_band_support">true</bool>
+</resources>
diff --git a/Umidigi/A3S/res/xml/power_profile.xml b/Umidigi/A3S/res/xml/power_profile.xml
new file mode 100644
index 0000000..742512d
--- /dev/null
+++ b/Umidigi/A3S/res/xml/power_profile.xml
@@ -0,0 +1,165 @@
+<?xml version="1.0" encoding="utf-8"?>
+<device name="Android">
+    <item name="ambient.on">100</item>
+    <item name="screen.on">100</item>
+    <item name="screen.full">300</item>
+    <item name="bluetooth.active">70</item>
+    <item name="bluetooth.on">1</item>
+    <item name="wifi.on">3</item>
+    <item name="wifi.active">200</item>
+    <item name="wifi.scan">100</item>
+    <item name="audio">10</item>
+    <item name="video">50</item>
+    <item name="camera.flashlight">160</item>
+    <item name="camera.avg">700</item>
+    <item name="gps.on">50</item>
+    <item name="radio.active">200</item>
+    <item name="radio.scanning">10</item>
+    <array name="radio.on">
+        <value>2</value>
+        <value>1</value>
+    </array>
+    <array name="cpu.clusters.cores">
+        <value>4</value>
+    </array>
+    <array name="cpu.speeds.cluster0">
+        <value>850000</value>
+        <value>918000</value>
+        <value>987000</value>
+        <value>1056000</value>
+        <value>1125000</value>
+        <value>1216000</value>
+        <value>1308000</value>
+        <value>1400000</value>
+        <value>1466000</value>
+        <value>1533000</value>
+        <value>1633000</value>
+        <value>1667000</value>
+        <value>1700000</value>
+        <value>1734000</value>
+        <value>1767000</value>
+        <value>1800000</value>
+    </array>
+    <array name="cpu.active.cluster0">
+        <value>100</value>
+        <value>112</value>
+        <value>125</value>
+        <value>136</value>
+        <value>150</value>
+        <value>165</value>
+        <value>180</value>
+        <value>230</value>
+        <value>250</value>
+        <value>310</value>
+        <value>330</value>
+        <value>360</value>
+        <value>390</value>
+        <value>410</value>
+        <value>440</value>
+        <value>460</value>
+    </array>
+    <item name="cpu.idle">4</item>
+    <item name="cpu.suspend">5</item>
+    <item name="cpu.active">2.55</item>. <item name="cpu.cluster_power.cluster0">2.11</item>
+    <item name="cpu.cluster_power.cluster1">2.22</item>
+    <array name="cpu.core_speeds.cluster0">
+        <value>850000</value>
+        <value>918000</value>
+        <value>987000</value>
+        <value>1056000</value>
+        <value>1125000</value>
+        <value>1216000</value>
+        <value>1308000</value>
+        <value>1400000</value>
+        <value>1466000</value>
+        <value>1533000</value>
+        <value>1633000</value>
+        <value>1667000</value>
+        <value>1700000</value>
+        <value>1734000</value>
+        <value>1767000</value>
+        <value>1800000</value>
+    </array>
+    <array name="cpu.core_speeds.cluster1">
+        <value>850000</value>
+        <value>918000</value>
+        <value>987000</value>
+        <value>1056000</value>
+        <value>1125000</value>
+        <value>1216000</value>
+        <value>1308000</value>
+        <value>1400000</value>
+        <value>1466000</value>
+        <value>1533000</value>
+        <value>1633000</value>
+        <value>1667000</value>
+        <value>1700000</value>
+        <value>1734000</value>
+        <value>1767000</value>
+        <value>1800000</value>
+    </array>
+    <array name="cpu.core_power.cluster0">
+        <value>10</value>
+        <value>18</value>
+        <value>19</value>
+        <value>20</value>
+        <value>21</value>
+        <value>22</value>
+        <value>23</value>
+        <value>24</value>
+        <value>25</value>
+        <value>26</value>
+        <value>27</value>
+        <value>28</value>
+        <value>29</value>
+        <value>30</value>
+    </array>
+    <array name="cpu.core_power.cluster1">
+        <value>25</value>
+        <value>35</value>
+        <value>36</value>
+        <value>37</value>
+        <value>38</value>
+        <value>39</value>
+        <value>40</value>
+        <value>41</value>
+        <value>42</value>
+        <value>43</value>
+        <value>44</value>
+        <value>45</value>
+        <value>50</value>
+        <value>60</value>
+    </array>
+    <array name="memory.bandwidths">
+        <value>22.7</value>
+    </array>
+    <item name="battery.capacity">3950</item>
+    <item name="wifi.controller.idle">0</item>
+    <item name="wifi.controller.rx">0</item>
+    <item name="wifi.controller.tx">0</item>
+    <array name="wifi.controller.tx_levels" />
+    <item name="wifi.controller.voltage">0</item>
+    <array name="wifi.batchedscan">
+        <value>.0002</value>
+        <value>.002</value>
+        <value>.02</value>
+        <value>.2</value>
+        <value>2</value>
+    </array>
+    <item name="modem.controller.sleep">0</item>
+    <item name="modem.controller.idle">0</item>
+    <item name="modem.controller.rx">0</item>
+    <array name="modem.controller.tx">
+        <value>0</value>
+        <value>0</value>
+        <value>0</value>
+        <value>0</value>
+        <value>0</value>
+    </array>
+    <item name="modem.controller.voltage">0</item>
+    <array name="gps.signalqualitybased">
+        <value>0</value>
+        <value>0</value>
+    </array>
+    <item name="gps.voltage">0</item>
+</device>
diff --git a/overlay.mk b/overlay.mk
index d9adba7..3fca1f2 100644
--- a/overlay.mk
+++ b/overlay.mk
@@ -109,6 +109,7 @@ PRODUCT_PACKAGES += \
 	treble-overlay-telephony-slsi-ims \
 	treble-overlay-telephony-sprd-ims \
 	treble-overlay-tethering \
+	treble-overlay-umidigi-A3S \
 	treble-overlay-umidigi-power \
 	treble-overlay-vsmart-live \
 	treble-overlay-webview \
-- 
2.17.1

