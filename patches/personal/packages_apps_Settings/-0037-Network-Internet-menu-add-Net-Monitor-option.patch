From 1785a386becfffbf9263413b7456f05fbe351a02 Mon Sep 17 00:00:00 2001
From: Victor Bo <bvoid@yandex.ru>
Date: Wed, 25 Nov 2020 11:12:50 -0500
Subject: [PATCH 37/37] Network & Internet menu: add Net Monitor option

  based on
  https://github.com/ezio84/abc_packages_apps_Settings/commit/d0eaf926f1df44f9332a43bf310c6b2791d07ca7
  https://github.com/ezio84/abc_packages_apps_Settings/commit/b0418ff6dd397a230047e1cec912b07bd8698db1
  https://github.com/ezio84/abc_vendor_support/raw/r/src/com/abc/support/preferences/CustomSystemSeekBarPreference.java
  https://github.com/ezio84/abc_vendor_support/raw/r/src/com/abc/support/preferences/CustomSeekBarPreference.java

Change-Id: If2134ef1570b8f99c8778603647a6fe6fb5fda67
---
 res/values-it/custom_strings.xml | 24 ++++++++++++++++++++++++
 res/values-ru/custom_strings.xml |  5 +++++
 res/values/custom_strings.xml    |  5 +++++
 res/xml/network_and_internet.xml | 20 ++++++++++++++++++--
 4 files changed, 52 insertions(+), 2 deletions(-)
 create mode 100644 res/values-it/custom_strings.xml

diff --git a/res/values-it/custom_strings.xml b/res/values-it/custom_strings.xml
new file mode 100644
index 0000000000..0dfade677d
--- /dev/null
+++ b/res/values-it/custom_strings.xml
@@ -0,0 +1,24 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!--  Copyright (C) 2007 The Android Open Source Project
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+ -->
+
+<resources xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">
+    <!-- Statusbar net monitor -->
+    <string name="net_monitor_category_title">Attività di rete</string>
+    <string name="network_traffic_state_title">Attiva monitor di rete</string>
+    <string name="network_traffic_state_summary">Attiva monitor di rete nella barra di stato espansa</string>
+    <string name="network_traffic_autohide_threshold_title">Soglia monitor di rete in KB/s</string>
+</resources>
diff --git a/res/values-ru/custom_strings.xml b/res/values-ru/custom_strings.xml
index 0778296760..848bcb9490 100644
--- a/res/values-ru/custom_strings.xml
+++ b/res/values-ru/custom_strings.xml
@@ -71,4 +71,9 @@
     <!-- Battery stats reset -->
     <string name="battery_stats_reset">Сброс статистики</string>
     <string name="battery_stats_message">Статистика батареи будет сброшена</string>
+    <!-- Statusbar net monitor -->
+    <string name="net_monitor_category_title">Сетевая активность</string>
+    <string name="network_traffic_state_title">Включить сетевой мониторинг</string>
+    <string name="network_traffic_state_summary">Показывать активность сети в статус-баре</string>
+    <string name="network_traffic_autohide_threshold_title">Уровень авто-скрытия мониторинга(KB/s)</string>
 </resources>
diff --git a/res/values/custom_strings.xml b/res/values/custom_strings.xml
index ec95fc50e0..b6713be43f 100644
--- a/res/values/custom_strings.xml
+++ b/res/values/custom_strings.xml
@@ -68,4 +68,9 @@
     <!-- Battery stats reset -->
     <string name="battery_stats_reset">Reset stats</string>
     <string name="battery_stats_message">Battery history stats are going to be reset</string>
+    <!-- Statusbar net monitor -->
+    <string name="net_monitor_category_title">Network activity</string>
+    <string name="network_traffic_state_title">Enable network monitor</string>
+    <string name="network_traffic_state_summary">Show net activity in expanded statusbar</string>
+    <string name="network_traffic_autohide_threshold_title">Net activity autohide threshold (KB/s)</string>
 </resources>
diff --git a/res/xml/network_and_internet.xml b/res/xml/network_and_internet.xml
index eaa7808335..189921b123 100644
--- a/res/xml/network_and_internet.xml
+++ b/res/xml/network_and_internet.xml
@@ -18,8 +18,7 @@
     xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:settings="http://schemas.android.com/apk/res-auto"
     android:key="network_and_internet_screen"
-    android:title="@string/network_dashboard_title"
-    settings:initialExpandedChildrenCount="5">
+    android:title="@string/network_dashboard_title">
 
     <PreferenceCategory
         android:key="multi_network_header"
@@ -69,6 +68,23 @@
         settings:userRestriction="no_config_mobile_networks"
         settings:useAdminDisabledSummary="true" />
 
+    <PreferenceCategory
+        android:key="net_monitor_category"
+        android:title="@string/net_monitor_category_title"
+        android:order="3" >
+        <com.caos.settings.preference.SystemSettingSwitchPreference
+            android:key="network_traffic_state"
+            android:title="@string/network_traffic_state_title"
+            android:summary="@string/network_traffic_state_summary"
+            android:defaultValue="true" />
+        <!--com.caos.settings.preference.CustomSystemSeekBarPreference
+            android:key="network_traffic_autohide_threshold"
+            android:title="@string/network_traffic_autohide_threshold_title"
+            android:max="10"
+            android:min="0"
+            android:defaultValue="1" /-->
+    </PreferenceCategory>
+
     <com.android.settingslib.RestrictedPreference
         android:fragment="com.android.settings.TetherSettings"
         android:key="tether_settings"
-- 
2.17.1

