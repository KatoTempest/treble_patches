From 7ec1140572620c67cddf4549e211cad78016da74 Mon Sep 17 00:00:00 2001
From: Victor Bo <bvoid@yandex.ru>
Date: Sat, 19 Dec 2020 14:17:06 -0500
Subject: [PATCH 191/191] have NfcTile get an NfcAdapter directly

  from
  https://github.com/omnirom/android_frameworks_base/commit/6810fa7b263adc1a8ab4e0ac5ae2b16a0ba37d4c
  https://github.com/omnirom/android_frameworks_base/commit/68e38bc708d743e40f514060b1299df651351540
---
 packages/SystemUI/res/drawable/ic_qs_nfc_disabled.xml           | 2 +-
 .../SystemUI/src/com/android/systemui/qs/tiles/NfcTile.java     | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/packages/SystemUI/res/drawable/ic_qs_nfc_disabled.xml b/packages/SystemUI/res/drawable/ic_qs_nfc_disabled.xml
index 558f3d083f4..becb18ad8ba 100644
--- a/packages/SystemUI/res/drawable/ic_qs_nfc_disabled.xml
+++ b/packages/SystemUI/res/drawable/ic_qs_nfc_disabled.xml
@@ -22,7 +22,7 @@
     <path
         android:pathData="M4 20h16V4H4v16z" />
     <path
-        android:fillColor="#4DFFFFFF"
+        android:fillColor="#FFFFFFFF"
         android:pathData="M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1 .9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0
 18H4V4h16v16zM18 6h-5c-1.1 0-2 .9-2 2v2.28c-.6 .35 -1 .98-1 1.72 0 1.1 .9 2 2
 2s2-.9 2-2c0-.74-.4-1.38-1-1.72V8h3v8H8V8h2V6H6v12h12V6z" />
diff --git a/packages/SystemUI/src/com/android/systemui/qs/tiles/NfcTile.java b/packages/SystemUI/src/com/android/systemui/qs/tiles/NfcTile.java
index 258ba0b5ead..702fc43ea1b 100644
--- a/packages/SystemUI/src/com/android/systemui/qs/tiles/NfcTile.java
+++ b/packages/SystemUI/src/com/android/systemui/qs/tiles/NfcTile.java
@@ -159,7 +159,7 @@ public class NfcTile extends QSTileImpl<BooleanState> {
     private NfcAdapter getAdapter() {
         if (mAdapter == null) {
             try {
-                mAdapter = NfcAdapter.getDefaultAdapter(mContext);
+                mAdapter = NfcAdapter.getNfcAdapter(mContext.getApplicationContext());
             } catch (UnsupportedOperationException e) {
                 mAdapter = null;
             }
-- 
2.17.1

