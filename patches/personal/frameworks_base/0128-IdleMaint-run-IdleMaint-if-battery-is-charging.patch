From 24e2691be926aa0ae7b242c7d4cb3f02def83e30 Mon Sep 17 00:00:00 2001
From: Victor Bo <bvoid@yandex.ru>
Date: Wed, 16 Dec 2020 14:18:29 -0500
Subject: [PATCH 128/189] IdleMaint: run IdleMaint if battery is charging

  from
  https://github.com/syberia-project/platform_frameworks_base/commit/04703d4232a91cd829d773b469d95a18f30ffeb4
---
 services/core/java/com/android/server/MountServiceIdler.java | 1 +
 1 file changed, 1 insertion(+)

diff --git a/services/core/java/com/android/server/MountServiceIdler.java b/services/core/java/com/android/server/MountServiceIdler.java
index 6bc1a570b7c..0f4c94bc8d4 100644
--- a/services/core/java/com/android/server/MountServiceIdler.java
+++ b/services/core/java/com/android/server/MountServiceIdler.java
@@ -113,6 +113,7 @@ public class MountServiceIdler extends JobService {
         JobInfo.Builder builder = new JobInfo.Builder(MOUNT_JOB_ID, sIdleService);
         builder.setRequiresDeviceIdle(true);
         builder.setRequiresBatteryNotLow(true);
+        builder.setRequiresCharging(true);
         builder.setMinimumLatency(nextScheduleTime);
         tm.schedule(builder.build());
     }
-- 
2.17.1

